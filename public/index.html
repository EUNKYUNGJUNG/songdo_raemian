<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="display: flex; flex-direction: column;">
      <div
        style="
          height: 180px;
          display: flex;
          align-items: center;
          justify-content: center;
          border-bottom-width: 2px;
          border-bottom-color: black;
          border-bottom-style: solid;
          margin-bottom: 20px;
        "
      >
        <h1 class="main-title">래미안송도역센트리폴</h1>
      </div>
      <section class="container">
        <img
          src="imgs/songdo_hil1.png"
          style="object-fit: cover"
          class="responsive-image"
        />
        <img
          src="imgs/songdo_rea1.png"
          style="object-fit: cover"
          class="responsive-image"
        />
        <img
          src="imgs/songdo_rea2.png"
          style="object-fit: cover"
          class="responsive-image"
        />
        <img
          src="imgs/songdo_rea3.png"
          style="object-fit: cover"
          class="responsive-image"
        />
        <img
          src="imgs/songdo_rea4.png"
          style="object-fit: cover"
          class="responsive-image"
        />
      </section>
      <section class="interest__info">
        <h3 class="info-title">관심고객등록</h3>
        <div class="info-title__sub">
          관심고객으로 등록하시면 관련정보를 안내해드립니다.
        </div>
        <div class="interest__box-wrapper">
          <div class="interest__box-item right">
            <div class="box-item">
              <p style="margin-top: 0">
                <span style="color: red">* </span>개인정보 수집 및 이용동의
              </p>
              [개인정보보호를 위한 이용자 동의사항]<br />
              자세한 내용은 아래의 ‘관심고객등록에 대한 개인정보취급방침’ 을
              확인하시기 바랍니다.<br /><br />*관심고객등록에 대한 개인정보
              취급방침*<br />래미안송도역센트리폴 이벤트 주체
              우리동네부동산(이하’운영주체’) 는 청약 및 분양상담 , 고객 직접
              참여 이벤트 등을 위해 아래와 같은 개인정보를 수집 및 이용하고
              있으며 , 아래의 목적 이외의 용도로는 이용하지 않습니다. 운영주체는
              고객님의 개인정보를 중요취급하고 개인정보 보호법 및 정보통신망
              이용촉진 및 정보보호 등에 관한 법률을 준수하고 있습니다. <br /><br />
              1.개인정보 수집 및 이용에 동의<br /><br />
              (1) 수집하는 개인정보 항목<br />-수집항목 : 이름 , 생년월일 ,
              휴대전화번호 , 서비스 이용기록 , 접속 로그 , 쿠키, 접속 IP 정보
              등의 전부 또는 일부<br />-개인정보 수집방법 : 홈페이지 , 관심고객
              등록 , 이벤트 응모 <br /><br />
              (2)개인정보의 수집 및 이용 목적  수집한 개인정보를 다음의 목적으로
              이용합니다.<br />-래미안송도역센트리폴에 대한 분양정보 및 마케팅
              자료,통계에 활용<br />-마케팅 및 광고에 활용 , 신규 서비스 개발 및
              특화 , 이벤트 등 광고성 정보 전달 , 고객사전추천(MGM) ,
              인구통계학적 특성에 따른 서비스 제공 및 광고 게재, 접속 빈도 파악
              또는 회원 서비스 이용에 대한 통계 및 분양정보 안내 , 아파트
              당첨확인 및 DM,TM 등<br /><br />(3)개인정보의 보유 및 이용기간<br />
              개인정보 수집 및 이용목적이 달성된 후 ( 분양마감, 이벤트 수령 등)
              해당 정보를 파기합니다.<br />다만, 아래의 경우에는 예외로 합니다. 
              <br />-고객이 사전에 요청한 경우<br />-법령의 규정에 의거하거나 ,
              수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가
              있는 경우  <br /><br />(4)거부할 권리<br />고객은 정보 수집 및
              이용에 대한 동의를 거부할 권리가 있습니다. 다만, 동의해야만 등록할
              수 있으며 , 거부시 이용에 제한이 있을 수 있습니다.<br /><br />2.개인정보의
              제3자 제공에 대한 동의<br /><br />(1)수집한 개인정보의 제3자의
              제공<br />고객에게 보다 질 높은 서비스를 제공하기 위해 아래와 같이
              귀하의 개인정보를 래미안송도역센트리폴 사업주체와 사업주체가
              지정한 공식 분양대행서(분양사)에게 제공할 수 있습니다. 이에
              운영주체는 사업주체가 지정한 분양대행사(분양사)로부터
              소개수수료(MGM)를 수령할 수 있습니다.<br /><br />(2) 제공하는
              개인정보 항목 : 이름 , 생년월일 , 휴대전화번호 , 서비스 이용기록 ,
              접속 로그 , 쿠키, 접속 IP 정보 등의 전부 또는 일부<br /><br />(3)
              제공 정보의 이용 목적 : 콘텐츠 제공 , 불만처리 등 민원처리 ,
              고지사항 전달, 고객사전추천(MGM) , 이벤트 등 광고성 정보 전달 ,
              분양정보 안내 및 분양상담 아파트 당첨확인 및 DM , TM 등의 확인 
              <br /><br />(4) 제공 정보의 보유 및 이용 기간<br />
              개인정보 수집 및 이용 목적이 달성된 후 ( 분양마감, 이벤트 수령 등
              ) 해당 정보를 파기합니다. 다만 , 아래의 경우에는 예외로 합니다. 
              <br /> -고객이 사전에 요청한 경우<br /> -법령의 규정에 의거하거나,
              수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가
              있는 경우<br /> <br />(5) 거부할 권리<br />고객은 개인정보 3자
              제공에 대한 동의를 거부할 권리가 있습니다. 다만 동의해야만 등록할
              수 있으며 , 거부시 이용에 제한이 있을 수 있습니다.<br /><br />*당사
              운영하는 이벤트 및 관심고객 등롥 유의사항<br />-타 업체(광고대행사
              및 부동산) 에 개인정보 등록 시 이벤트 참여 불가(공식 홈페이지
              관심고객등록과는 무관함.)<br />-홈페이지에 등록한 정보가 계약서상
              인적사항과 다를 경우 증정 불가<br />-등록한 개인정보는 분양마감 및
              이벤트 증정 등의 업무 종료 후 즉시 파기함<br /><br />이벤트 관련
              이메일 문의 :  woori_dongnae123@naver.com
            </div>
            <div class="box-item__button">
              <button class="terms-button">
                <input type="checkbox" id="agree1" name="terms" />
                <label for="agree1" class="trems-text"
                  >약관에 동의합니다.</label
                >
              </button>
            </div>
          </div>
          <div class="interest__box-item left">
            <div class="box-item--input">
              <input
                class="need-item right"
                type="text"
                id="name"
                name="name"
                placeholder="성함(필수)"
              />
              <input
                class="need-item center"
                type="text"
                id="phone"
                name="phone"
                placeholder="연락처(필수)"
              />
              <input
                class="need-item left"
                type="text"
                id="birth"
                name="birth"
                placeholder="생년월일(필수)"
              />
            </div>
            <div style="margin-bottom: 15px">
              <textarea
                class="textarea"
                style="height: 198px; width: 100%"
                id="request-text"
                placeholder="추가문의 내용을 적어주세요."
              ></textarea>
            </div>
            <div>
              <button class="custom-button" type="button" id="submit-btn-big">
                관심고객으로 등록하기
              </button>
            </div>
          </div>
        </div>
      </section>
      <footer class="footer">
        <div>
          <strong class="footer-title">우리동네부동산</strong>
          <p class="footer-title__sub">
            Copyright By 우리동네부동산 All rights reserved.
          </p>
          <p class="footer-title__sub" style="margin-top: -10px">
            우리동네부동산ㅣ e-mail : woori_dongnae123@naver.com
          </p>
        </div>
      </footer>

      <!-- 플로팅 -->
      <section class="interest" id="interest-section">
        <div class="interest__box">
          <div class="interest__item">
            <div>이름 :</div>
            <input
              type="text"
              id="name2"
              name="name"
              placeholder="성함(필수)"
              class="input-item"
            />
          </div>
          <div class="interest__item">
            <div>연락처 :</div>
            <input
              type="text"
              id="phone2"
              name="phone"
              placeholder="연락처(필수)"
              class="input-item"
            />
          </div>
          <div class="interest__item">
            <div>생년월일(6자리) ex.880630 :</div>
            <input
              type="text"
              id="birth2"
              name="birth"
              placeholder="생년월일(필수)"
              class="input-item"
            />
          </div>
          <div class="floating__box-item" style="margin-right: 10px">
            <div class="floating-box-item">
              <p style="margin-top: 0">
                <span style="color: red">* </span>개인정보 수집 및 이용동의
              </p>
              [개인정보보호를 위한 이용자 동의사항]<br />
              자세한 내용은 아래의 ‘관심고객등록에 대한 개인정보취급방침’ 을
              확인하시기 바랍니다.<br /><br />*관심고객등록에 대한 개인정보
              취급방침* <br />
              래미안송도역센트리폴이벤트 주체 우리동네부동산(이하’운영주체’) 는
              청약 및 분양상담 , 고객 직접 참여 이벤트 등을 위해 아래와 같은
              개인정보를 수집 및 이용하고 있으며 , 아래의 목적 이외의 용도로는
              이용하지 않습니다. 운영주체는 고객님의 개인정보를 중요취급하고
              개인정보 보호법 및 정보통신망 이용촉진 및 정보보호 등에 관한
              법률을 준수하고 있습니다. <br /><br />
              1.개인정보 수집 및 이용에 동의<br /><br />
              (1) 수집하는 개인정보 항목<br />-수집항목 : 이름 , 생년월일 ,
              휴대전화번호 , 서비스 이용기록 , 접속 로그 , 쿠키, 접속 IP 정보
              등의 전부 또는 일부<br />-개인정보 수집방법 : 홈페이지 , 관심고객
              등록 , 이벤트 응모 <br /><br />
              (2)개인정보의 수집 및 이용 목적  수집한 개인정보를 다음의 목적으로
              이용합니다.<br />-래미안송도역센트리폴에 대한 분양정보 및 마케팅
              자료,통계에 활용<br />-마케팅 및 광고에 활용 , 신규 서비스 개발 및
              특화 , 이벤트 등 광고성 정보 전달 , 고객사전추천(MGM) ,
              인구통계학적 특성에 따른 서비스 제공 및 광고 게재, 접속 빈도 파악
              또는 회원 서비스 이용에 대한 통계 및 분양정보 안내 , 아파트
              당첨확인 및 DM,TM 등<br /><br />(3)개인정보의 보유 및 이용기간<br />
              개인정보 수집 및 이용목적이 달성된 후 ( 분양마감, 이벤트 수령 등)
              해당 정보를 파기합니다.<br />다만, 아래의 경우에는 예외로 합니다. 
              <br />-고객이 사전에 요청한 경우<br />-법령의 규정에 의거하거나 ,
              수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가
              있는 경우  <br /><br />(4)거부할 권리<br />고객은 정보 수집 및
              이용에 대한 동의를 거부할 권리가 있습니다. 다만, 동의해야만 등록할
              수 있으며 , 거부시 이용에 제한이 있을 수 있습니다.<br /><br />2.개인정보의
              제3자 제공에 대한 동의<br /><br />(1)수집한 개인정보의 제3자의
              제공<br />고객에게 보다 질 높은 서비스를 제공하기 위해 아래와 같이
              귀하의 개인정보를 래미안송도역센트리폴 사업주체와 사업주체가
              지정한 공식 분양대행서(분양사)에게 제공할 수 있습니다. 이에
              운영주체는 사업주체가 지정한 분양대행사(분양사)로부터
              소개수수료(MGM)를 수령할 수 있습니다.<br /><br />(2) 제공하는
              개인정보 항목 : 이름 , 생년월일 , 휴대전화번호 , 서비스 이용기록 ,
              접속 로그 , 쿠키, 접속 IP 정보 등의 전부 또는 일부<br /><br />(3)
              제공 정보의 이용 목적 : 콘텐츠 제공 , 불만처리 등 민원처리 ,
              고지사항 전달, 고객사전추천(MGM) , 이벤트 등 광고성 정보 전달 ,
              분양정보 안내 및 분양상담 아파트 당첨확인 및 DM , TM 등의 확인 
              <br /><br />(4) 제공 정보의 보유 및 이용 기간<br />
              개인정보 수집 및 이용 목적이 달성된 후 ( 분양마감, 이벤트 수령 등
              ) 해당 정보를 파기합니다. 다만 , 아래의 경우에는 예외로 합니다. 
              <br /> -고객이 사전에 요청한 경우<br /> -법령의 규정에 의거하거나,
              수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가
              있는 경우<br /> <br />(5) 거부할 권리<br />고객은 개인정보 3자
              제공에 대한 동의를 거부할 권리가 있습니다. 다만 동의해야만 등록할
              수 있으며 , 거부시 이용에 제한이 있을 수 있습니다.<br /><br />*당사
              운영하는 이벤트 및 관심고객 등롥 유의사항<br />-타 업체(광고대행사
              및 부동산) 에 개인정보 등록 시 이벤트 참여 불가(공식 홈페이지
              관심고객등록과는 무관함.)<br />-홈페이지에 등록한 정보가 계약서상
              인적사항과 다를 경우 증정 불가<br />-등록한 개인정보는 분양마감 및
              이벤트 증정 등의 업무 종료 후 즉시 파기함<br /><br />이벤트 관련
              이메일 문의 :  woori_dongnae123@naver.com
            </div>
            <div class="box-item__button">
              <button class="terms-button">
                <input type="checkbox" id="agree2" name="terms" />
                <label for="agree2" class="trems-text"
                  >약관에 동의합니다.</label
                >
              </button>
            </div>
          </div>
          <button
            type="button"
            id="submit-btn-small"
            class="interest-item__button"
          >
            관심고객으로 등록하기
          </button>
        </div>
      </section>
      <button class="interest__mini" id="test-btn">등록</button>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.8.1/firebase-firestore.js"></script>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-analytics.js";
      const firebaseConfig = {
        apiKey: "AIzaSyCYfnW8jEAU7JPM3aKo6PuHI-MzzfDOkxE",
        authDomain: "uridongnaesongdorae.firebaseapp.com",
        databaseURL:
          "https://uridongnaesongdorae-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "uridongnaesongdorae",
        storageBucket: "uridongnaesongdorae.appspot.com",
        messagingSenderId: "528858776668",
        appId: "1:528858776668:web:3946278e6616bd8fe95299",
        measurementId: "G-B41LSR5R9V",
      };
      firebase.initializeApp(firebaseConfig);

      var database = firebase.database();

      function writeUserData(value) {
        firebase.database().ref("users/").push(value);
        alert("관심고객 등록 및 이벤트 응모가 완료되었습니다.");
      }

      document.addEventListener("DOMContentLoaded", function () {
        const submitBtn = document.getElementById("submit-btn-big");
        const submitBtnSmall = document.getElementById("submit-btn-small");
        const phoneInput = document.getElementById("phone");
        const phoneInput2 = document.getElementById("phone2");

        function handleSubmit(event) {
          event.preventDefault();
          let name, phone, birth;
          const requestText = document.getElementById("request-text").value;
          if (event.target === submitBtn) {
            name = document.getElementById("name").value;
            phone = phoneInput.value;
            birth = document.getElementById("birth").value;
          } else if (event.target === submitBtnSmall) {
            name = document.getElementById("name2").value;
            phone = phoneInput2.value;
            birth = document.getElementById("birth2").value;
          }

          // 필수 입력 값 확인
          if (
            name.trim() === "" ||
            phone.trim() === "" ||
            birth.trim() === ""
          ) {
            alert("모든 필수 입력 항목을 작성해 주세요.");
            return;
          }

          // 전화번호 유효성 검사
          phone = formatPhoneNumber(phone);
          if (!telValidChk(phone)) {
            alert("유효한 전화번호를 입력해 주세요. 예: 010-1234-5678");
            return;
          }

          // 약관 동의 확인
          let agreeRadio;
          if (event.target === submitBtn) {
            agreeRadio = document.getElementById("agree1");
          } else if (event.target === submitBtnSmall) {
            agreeRadio = document.getElementById("agree2");
          }

          if (!agreeRadio.checked) {
            alert("약관에 동의가 필요합니다.");
            return;
          }

          // 값 준비
          const value = name + phone + birth + requestText;

          // Firebase에 저장
          writeUserData(value);
        }

        // 전화번호 유효성 검사 함수
        const pattern = /^010-\d{4}-\d{4}$/;

        function telValidChk(tel) {
          return pattern.test(tel);
        }

        // 전화번호 포맷팅 함수
        function formatPhoneNumber(phone) {
          phone = phone.replace(/[^0-9]/g, ""); // 숫자 이외의 문자 제거
          if (phone.startsWith("010")) {
            if (phone.length > 7) {
              phone = phone.replace(/(\d{3})(\d{4})(\d{0,4})/, "$1-$2-$3");
            } else if (phone.length > 3) {
              phone = phone.replace(/(\d{3})(\d{0,4})/, "$1-$2");
            }
          }
          return phone;
        }

        // 전화번호 입력 필드에 이벤트 리스너 등록
        phoneInput.addEventListener("input", function (event) {
          event.target.value = formatPhoneNumber(event.target.value);
        });
        phoneInput2.addEventListener("input", function (event) {
          event.target.value = formatPhoneNumber(event.target.value);
        });

        submitBtn.addEventListener("click", handleSubmit);
        submitBtnSmall.addEventListener("click", handleSubmit);
      });

      document.addEventListener("DOMContentLoaded", function () {
        const testBtn = document.getElementById("test-btn");
        const interestSection = document.getElementById("interest-section");

        testBtn.addEventListener("click", function () {
          if (window.innerWidth <= 600) {
            if (
              interestSection.style.display === "none" ||
              interestSection.style.display === ""
            ) {
              interestSection.style.display = "block";
            } else {
              interestSection.style.display = "none";
            }
          }
        });
      });
    </script>
  </body>
</html>
